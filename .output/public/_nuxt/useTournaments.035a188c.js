import{X as b,n as v,Y as T,Z as O,$ as P,a0 as w,a1 as C,K as M,a2 as S,h as B,a3 as E,a4 as x,a5 as N,a6 as h}from"./entry.43daaf28.js";function I(...r){var y;const d=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(d);let[t,c,n={}]=r;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const s=M(),g=()=>null,e=()=>s.isHydrating?s.payload.data[t]:s.static.data[t];n.server=n.server??!0,n.default=n.default??g,n.getCachedData=n.getCachedData??e,n.lazy=n.lazy??!1,n.immediate=n.immediate??!0,n.deep=n.deep??b.deep;const u=()=>![null,void 0].includes(n.getCachedData(t));if(!s._asyncData[t]||!n.immediate){(y=s.payload._errors)[t]??(y[t]=null);const o=n.deep?v:T;s._asyncData[t]={data:o(n.getCachedData(t)??n.default()),pending:v(!u()),error:O(s.payload._errors,t),status:v("idle")}}const a={...s._asyncData[t]};a.refresh=a.execute=(o={})=>{if(s._asyncDataPromises[t]){if(o.dedupe===!1)return s._asyncDataPromises[t];s._asyncDataPromises[t].cancelled=!0}if((o._initial||s.isHydrating&&o._initial!==!1)&&u())return Promise.resolve(n.getCachedData(t));a.pending.value=!0,a.status.value="pending";const f=new Promise((i,l)=>{try{i(c(s))}catch(_){l(_)}}).then(i=>{if(f.cancelled)return s._asyncDataPromises[t];let l=i;n.transform&&(l=n.transform(i)),n.pick&&(l=R(l,n.pick)),s.payload.data[t]=l,a.data.value=l,a.error.value=null,a.status.value="success"}).catch(i=>{if(f.cancelled)return s._asyncDataPromises[t];a.error.value=S(i),a.data.value=B(n.default()),a.status.value="error"}).finally(()=>{f.cancelled||(a.pending.value=!1,delete s._asyncDataPromises[t])});return s._asyncDataPromises[t]=f,s._asyncDataPromises[t]};const m=()=>a.refresh({_initial:!0}),D=n.server!==!1&&s.payload.serverRendered;{const o=E();if(o&&!o._nuxtOnBeforeMountCbs){o._nuxtOnBeforeMountCbs=[];const i=o._nuxtOnBeforeMountCbs;o&&(P(()=>{i.forEach(l=>{l()}),i.splice(0,i.length)}),w(()=>i.splice(0,i.length)))}D&&s.isHydrating&&(a.error.value||u())?(a.pending.value=!1,a.status.value=a.error.value?"error":"success"):o&&(s.payload.serverRendered&&s.isHydrating||n.lazy)&&n.immediate?o._nuxtOnBeforeMountCbs.push(m):n.immediate&&m(),n.watch&&C(n.watch,()=>a.refresh());const f=s.hook("app:data:refresh",async i=>{(!i||i.includes(t))&&await a.refresh()});o&&w(f)}const p=Promise.resolve(s._asyncDataPromises[t]).then(()=>a);return Object.assign(p,a),p}function R(r,d){const t={};for(const c of d)t[c]=r[c];return t}const $=()=>{const r=x();async function d(e){var a,m;(a=e.params)!=null&&a.filter&&(e.params.filter=JSON.stringify(e.params.filter)),(m=e.params)!=null&&m.deep&&(e.params.deep=JSON.stringify(e.params.deep));const u=await r(`/items/${e.collection}`,{method:"GET",params:e.params});return u.meta?u:u.data}return{getItems:d,getSingletonItem:async e=>{var a,m;return(a=e.params)!=null&&a.filter&&(e.params.filter=JSON.stringify(e.params.filter)),(m=e.params)!=null&&m.deep&&(e.params.deep=JSON.stringify(e.params.deep)),(await r(`/items/${e.collection}`,{method:"GET",params:e.params})).data},getItemById:async e=>{var a,m;return(a=e.params)!=null&&a.filter&&(e.params.filter=JSON.stringify(e.params.filter)),(m=e.params)!=null&&m.deep&&(e.params.deep=JSON.stringify(e.params.deep)),(await r(`/items/${e.collection}/${e.id}`,{method:"GET",params:e.params})).data},createItems:async e=>(await r(`/items/${e.collection}`,{method:"POST",body:e.items})).data,deleteItems:async e=>{await r(`/items/${e.collection}`,{method:"DELETE",body:e.items})},updateItem:async e=>(await r(`/items/${e.collection}/${e.id}`,{method:"PATCH",body:e.item})).data}};function k(r){return new Intl.NumberFormat().format(r)}function J(r,d="id"){return r==null?void 0:r.reduce((t,c)=>(t[c[d]]||(t[c[d]]=[]),t[c[d]].push(c),t),{})}const H=N("tournaments",()=>{const{getItems:r,getItemById:d}=$(),t=h("loadingDoc",()=>!1),c=h("tournament_total",()=>5),n=h("tournament_items",()=>[]),s=h("tournament_item",()=>({})),g=h("tournament_item_temp",()=>({id:1,title:"Tournament Title",description:"Subtitle/Description Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et ....",views:1234567,image:"/img/hearth.png",rounds:[{id:1,name:"Round 1",time:"00:00",matches:[{id:"m-11",name:"Match 11",time:"00:00",url:"",ready_to_play:!0},{id:"m-12",name:"Match 12",time:"00:00",url:""},{id:"m-13",name:"Match 13",time:"00:00",url:""},{id:"m-14",name:"Match 14",time:"00:00",url:"",ready_to_play:!0}]},{id:2,name:"Round 2",time:"00:00",matches:[{id:"m-21",name:"Match 21",time:"00:00",url:"",ready_to_play:!0},{id:"m-22",name:"Match 22",time:"00:00",url:""}]},{id:3,name:"Round 3",time:"00:00",matches:[{id:"m-31",name:"Match 31",time:"00:00",url:""}]},{id:4,name:"Finals",time:"00:00",matches:[{id:"m-31",name:"Match 41",time:"00:00",url:""}]}]}));return{loading:t,items:n,total:c,item:s,item_temp:g,getTournaments:async()=>{const{data:a,error:m}=await I("getItems",()=>r({collection:"tournament"}));return t.value=!0,n.value=a||[],a},getTournamentById:async a=>{const[m,D]=await Promise.all([I("getTournamentById",()=>d({collection:"tournament",id:a})),I("getTournamentItems",()=>r({collection:"tournament_item",params:{filter:{tournament:a}}}))]),p=J(D.data.value,"rank"),y=[],o=Object.keys(p),f=o.length-1;o.forEach((l,_)=>{y.push({id:l,name:f==_?"Finals":"Round "+(_+1),time:"00:00",matches:p[l]})}),m.data.value.rounds=y;const i=m.data;return t.value=!0,s.value=i,i}}});export{k as f,H as u};
